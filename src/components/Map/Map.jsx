import Map, {
    Marker,
    NavigationControl,
    GeolocateControl,
    ScaleControl,
    Source,
    Layer,
} from "react-map-gl/maplibre";
import "./Map.css";
import geoJSON from "../../data/houses_of_bratislava.json";
import MarkerComponent from "../Marker/Marker";
import Geocoder from "components/Geocoder/Geocoder";

console.log(geoJSON);

const MapComponent = ({data}) => {
    // eslint-disable-next-line no-unused-vars
    const change = (e) => {
        console.log(e);
    };

    const numberParse = (number) => {
        let parsedNumber;

        parsedNumber = parseFloat(number);

        return parsedNumber;
    };

    const staticPolygonData = {
        type: "Feature",
        geometry: {
            type: "Polygon",
            coordinates: [
                [
                    [
                        17.105994522571564,
                        48.134514829127426
                    ],
                    [
                        17.10612326860428,
                        48.13439847486481
                    ],
                    [
                        17.106136679649353,
                        48.13440384506737
                    ],
                    [
                        17.10618495941162,
                        48.13436088343133
                    ],
                    [
                        17.106745541095734,
                        48.133865031947124
                    ],
                    [
                        17.106418311595917,
                        48.13370034375228
                    ],
                    [
                        17.106439769268036,
                        48.13368602301472
                    ],
                    [
                        17.10667312145233,
                        48.133804168980134
                    ],
                    [
                        17.10667848587036,
                        48.13379700862632
                    ],
                    [
                        17.10683137178421,
                        48.1338757724632
                    ],
                    [
                        17.10685282945633,
                        48.13385608151532
                    ],
                    [
                        17.10693061351776,
                        48.13389546340355
                    ],
                    [
                        17.10695743560791,
                        48.133870402205446
                    ],
                    [
                        17.107011079788208,
                        48.133899043573734
                    ],
                    [
                        17.107201516628265,
                        48.13372898521541
                    ],
                    [
                        17.10721492767334,
                        48.133718244668614
                    ],
                    [
                        17.10717737674713,
                        48.13370034375228
                    ],
                    [
                        17.10720419883728,
                        48.133677072551734
                    ],
                    [
                        17.107239067554474,
                        48.133693183384
                    ],
                    [
                        17.107386589050293,
                        48.13356250648749
                    ],
                    [
                        17.107397317886353,
                        48.1335660866809
                    ],
                    [
                        17.107536792755127,
                        48.133447940167684
                    ],
                    [
                        17.107665538787842,
                        48.13331368243635
                    ],
                    [
                        17.107893526554108,
                        48.13319195512321
                    ],
                    [
                        17.107957899570465,
                        48.133163313360484
                    ],
                    [
                        17.108151018619537,
                        48.1330863385441
                    ],
                    [
                        17.108210027217865,
                        48.1330684374075
                    ],
                    [
                        17.108405828475952,
                        48.13300936361236
                    ],
                    [
                        17.108429968357086,
                        48.133002203147726
                    ],
                    [
                        17.10857480764389,
                        48.132968190927045
                    ],
                    [
                        17.10866868495941,
                        48.1329449193947
                    ],
                    [
                        17.10895299911499,
                        48.132909117016624
                    ],
                    [
                        17.10910052061081,
                        48.13290195653798
                    ],
                    [
                        17.109591364860535,
                        48.13286794425093
                    ],
                    [
                        17.10968792438507,
                        48.13285362328122
                    ],
                    [
                        17.10962623357773,
                        48.132549301730705
                    ],
                    [
                        17.109738886356354,
                        48.132778438124745
                    ],
                    [
                        17.109787166118622,
                        48.13276769737911
                    ],
                    [
                        17.10982471704483,
                        48.13283214181919
                    ],
                    [
                        17.109878361225128,
                        48.132816030716754
                    ],
                    [
                        17.110004425048828,
                        48.13278201837278
                    ],
                    [
                        17.11010366678238,
                        48.132756956631226
                    ],
                    [
                        17.110771536827087,
                        48.132577943835884
                    ],
                    [
                        17.11054354906082,
                        48.13220201493431
                    ],
                    [
                        17.110516726970673,
                        48.13215726131031
                    ],
                    [
                        17.110479176044464,
                        48.132142940142415
                    ],
                    [
                        17.110401391983032,
                        48.132128618970484
                    ],
                    [
                        17.11018145084381,
                        48.13209281602326
                    ],
                    [
                        17.10996687412262,
                        48.132085655430814
                    ],
                    [
                        17.109763026237488,
                        48.132089235727136
                    ],
                    [
                        17.10969865322113,
                        48.132094606171194
                    ],
                    [
                        17.10970401763916,
                        48.13213040911717
                    ],
                    [
                        17.10962623357773,
                        48.13213935984979
                    ],
                    [
                        17.109543085098267,
                        48.13214652043473
                    ],
                    [
                        17.109537720680237,
                        48.132117878088906
                    ],
                    [
                        17.109470665454865,
                        48.13212145838304
                    ],
                    [
                        17.10836559534073,
                        48.13221812622936
                    ],
                    [
                        17.108161747455597,
                        48.13223602766243
                    ],
                    [
                        17.108140289783478,
                        48.13223781780542
                    ],
                    [
                        17.108100056648254,
                        48.13224139809114
                    ],
                    [
                        17.10807055234909,
                        48.132244978376605
                    ],
                    [
                        17.107799649238586,
                        48.132289731924146
                    ],
                    [
                        17.10759311914444,
                        48.132372078349704
                    ],
                    [
                        17.107432186603546,
                        48.13244547396553
                    ],
                    [
                        17.10736781358719,
                        48.132474116128634
                    ],
                    [
                        17.10730344057083,
                        48.13250633854298
                    ],
                    [
                        17.107239067554474,
                        48.13255288199471
                    ],
                    [
                        17.107222974300385,
                        48.132563622785284
                    ],
                    [
                        17.10711568593979,
                        48.1326388082563
                    ],
                    [
                        17.106662392616272,
                        48.13304516592058
                    ],
                    [
                        17.106477320194244,
                        48.1332241770871
                    ],
                    [
                        17.106286883354187,
                        48.13339244701464
                    ],
                    [
                        17.105978429317474,
                        48.13323849795347
                    ],
                    [
                        17.105906009674072,
                        48.13331368243635
                    ],
                    [
                        17.105825543403625,
                        48.13339960742485
                    ],
                    [
                        17.10574507713318,
                        48.13349090256756
                    ],
                    [
                        17.105667293071747,
                        48.13358756783589
                    ],
                    [
                        17.10562437772751,
                        48.13364843105964
                    ],
                    [
                        17.10562437772751,
                        48.133764787021875
                    ],
                    [
                        17.105643153190613,
                        48.13377373746957
                    ],
                    [
                        17.105667293071747,
                        48.13378626809376
                    ],
                    [
                        17.105895280838013,
                        48.13390262374364
                    ],
                    [
                        17.105935513973236,
                        48.13392231467367
                    ],
                    [
                        17.10593283176422,
                        48.13392410475785
                    ],
                    [
                        17.10569143295288,
                        48.13413891440584
                    ],
                    [
                        17.106010615825653,
                        48.134301811123095
                    ],
                    [
                        17.10580676794052,
                        48.13448260797341
                    ],
                    [
                        17.105809450149536,
                        48.13448439803804
                    ],
                    [
                        17.105868458747864,
                        48.13451303906385
                    ],
                    [
                        17.105914056301117,
                        48.134473657649266
                    ],
                    [
                        17.10594892501831,
                        48.13449155829599
                    ],
                    [
                        17.105994522571564,
                        48.134514829127426
                    ]
                ],
            ],
        },
        properties: {},
    };

    return (
        <Map
            initialViewState={{
                longitude: 17.107,
                latitude: 48.145,
                zoom: 14,
                pitch: 45,
                bearing: -17.6,
                container: 'map',
                antialias: true
            }}
            doubleClickZoom={false}
            mapStyle="https://api.maptiler.com/maps/streets-v2/style.json?key=jkyOg7nIBllWn5tcjnsS"
            style={{width: "100%", height: 900}}
        >

            {<Source id="static-polygon" type="geojson" data={staticPolygonData}>
                <Layer
                    id="static-polygon-layer"
                    type="fill"
                    paint={{
                        "fill-color": "#088",
                        "fill-opacity": 0.5,
                    }}
                />
            </Source>}
            {/* {data.length > 0 &&
        data.map((el) => (
          <Marker
            key={el.id}
            longitude={numberParse(el.geoPoints.longitude)}
            latitude={numberParse(el.geoPoints.latitude)}
            anchor="bottom"
          >
            <MarkerComponent
              longitude={numberParse(el.geoPoints.longitude)}
              latitude={numberParse(el.geoPoints.latitude)}
              price={el.price}
              address={el.title}
            />
          </Marker>
        ))} */}
            {geoJSON.features
                .filter((el) => el.geoPoints)
                .map((el) => (
                    <Marker
                        key={el.id}
                        longitude={numberParse(el.geoPoints.longitude)}
                        latitude={numberParse(el.geoPoints.latitude)}
                        anchor="bottom"
                    >
                        <MarkerComponent
                            longitude={numberParse(el.geoPoints.longitude)}
                            latitude={numberParse(el.geoPoints.latitude)}
                            price={el.price}
                            address={el.title}
                        />
                    </Marker>
                ))}
            <Geocoder position="top-left"/>
            <GeolocateControl/>
            <NavigationControl/>
            <ScaleControl/>
        </Map>
    );
};

export default MapComponent;
